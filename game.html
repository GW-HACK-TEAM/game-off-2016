<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/chessboard-0.3.0.min.css"/>
  <link rel="stylesheet" href="css/main.css"/>
  <script src="js/contrib/lodash.js"></script>
  <script src="js/contrib/jquery-1.10.1.min.js"></script>
  <script src="js/contrib/bootstrap.min.js"></script>
  <script src="js/contrib/chess.min.js"></script>
  <script src="js/contrib/chessboard-0.3.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.1/howler.min.js"></script>
  <title>Rock Legends vs Electronic Dance Music Legends</title>
</head>

<body>
<div class="toolbar">
  <div class="container">
    <div class="menu">
      <ul>
        <li>
          <a class="exit" href="leaderboard.html">Leaderboard</a>
        </li>
        <li>
          <a class="show-settings" href="#">Options</a>
        </li>
      </ul>
    </div>

    <div class="megatron">
      <div class="megatron-content">
        <h1 class="username"></h1>
        <span class="score-label">Score</span>
        <span class="h1 score">0</span>
      </div>
    </div>

    <div class="social">
      <ul>
        <li>
          Share
        </li>
        <li>
          <img src="/img/icons/facebook.png" />
        </li>
        <li>
          <img src="/img/icons/twitter.png" />
        </li>
        <li>
          <img src="/img/icons/google.png" />
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="game-area">
  <div class="container">
    <span class="h3" id="time1">0:05:00</span>
    <div id="board" style="width: 512px"></div>
    <span class="h3" id="time2">0:05:00</span>
  </div>

  <div class="bants-wrapper rock-bants">
  </div>
  <div class="bants-wrapper dance-bants">
  </div>

  <div class="settings">
    <h3>Moves:</h3>
    <div id="pgn"></div>
    <hr>
    <form class="form-horizontal">
      <div class="form-group">
        <label for="timeBase" class="control-label col-xs-4 col-sm-6 col-md-4">Base time (min)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeBase" value="5">
        </div>
      </div>
      <div class="form-group">
        <label for="timeInc" class="control-label col-xs-4 col-sm-6 col-md-4">Increment (sec)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeInc" value="2">
        </div>
      </div>
      <div class="form-group">
        <label for="skillLevel" class="control-label col-xs-4 col-sm-6 col-md-4">Skill Level (0-20)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="skillLevel" value="0">
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4">I play</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <div class="btn-group" data-toggle="buttons">
            <label class="btn btn-primary active" id="color-white"><input type="radio" name="color">White</label>
            <label class="btn btn-primary" id="color-black"><input type="radio" name="color">Black</label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="showScore" class="control-label col-xs-4 col-sm-6 col-md-4">Show score</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="checkbox" class="form-control" id="showScore" checked>
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4"></label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <button type="button" class="btn btn-primary start-new-game">New Game</button>
        </div>
      </div>

      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4">Promote to</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <select id=promote>
            <option value=q selected>Queen</option>
            <option value=r>Rook</option>
            <option value=b>Bishop</option>
            <option value=n>Knight</option>
          </select>
        </div>
      </div>
    </form>
    <h5>Evaluation</h5>
    <pre id=evaluation></pre>
    <hr>
    <div id="engineStatus">...</div>
  </div>
</div>

<script>
  let username = localStorage.getItem('username');
  let side = localStorage.getItem('color');
  $('.exit').click(function () {
    let score = $('.score').text();
    if(!score){
      return;
    }
    if(score == 'Mate in 1'){
      score = 100;
    }
    localStorage.setItem('score', score);
    $.ajax({
       type: "POST",
       url: 'http://chris.gw:3000/api/postScore',
       data: {
         score: score,
         username: username,
         side: side
       },
     });
  });
  $('.username').text(username)
</script>
<script src="./js/egg.js"></script>
<script src="./js/bulletin.js"></script>
<script src="./js/insults.js"></script>
<script src="./js/lib/events.js"></script>
<script src="./js/sounds.js"></script>
<script src="./js/enginegame.js"></script>
<script src="./js/main.js"></script>
</body>
</html>
